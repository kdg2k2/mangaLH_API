<%- include('../partials/head') %>

<body>
    <%- include('../partials/header') %>
    <div class="container body mb-4 mt-3">
        <h1>
            <%= data.title %>
        </h1>

        <div class="row">
            <div class="col-md-4">
                <img src="<%= data.cover %>" class="img-fluid mb-4" alt="Cover">
                <h3>Genres</h3>
                <ul class="list-unstyled">
                    <% if (data.genres) { %>
                    <% data.genres.forEach(function(genre) { %>
                    <li>
                        <%= genre %>
                    </li>
                    <% }); %>
                    <% } else { %>
                    <li>No genres available</li>
                    <% } %>
                </ul>
            </div>

            <div class="col-md-8">
                <h3>Other Titles</h3>
                <% if (data.otherTitle) { %>
                <ul class="list-unstyled">
                    <% data.otherTitle.forEach(function(title) { %>
                    <li>
                        <%= title %>
                    </li>
                    <% }); %>
                </ul>
                <% } else { %>
                <p>No other titles available</p>
                <% } %>

                <h3>Author</h3>
                <% if (Array.isArray(data.author)) { %>
                <ul class="list-unstyled">
                    <% data.author.forEach(function(author) { %>
                    <li>
                        <%= author %>
                    </li>
                    <% }); %>
                </ul>
                <% } else { %>
                <p>
                    <%= data.author %>
                </p>
                <% } %>

                <h3>Status</h3>
                <p>
                    <%= data.status %>
                </p>

                <h3>Last Update</h3>
                <p>
                    <%= data.lastUpdate %>
                </p>

                <h3>Rating</h3>
                <p>
                    <%= data.rating %>
                </p>

                <h3>View</h3>
                <p>
                    <%= data.view %>
                </p>

                <h3>Description</h3>
                <p>
                    <%= data.description %>
                </p>
            </div>
        </div>

        <h2>Related Manga</h2>
        <div class="row">
            <% data.related.forEach(function(manga) { %>
            <div class="col-md-4">
                <div class="card mb-4">
                    <img src="<%= manga.cover %>" class="card-img-top"
                        alt="Cover">
                    <div class="card-body">
                        <h5 class="card-title">
                            <%= manga.title %>
                        </h5>
                        <p class="card-text">
                            <%= manga.description %>
                        </p>
                        <a href="/<%= manga.mangaEP %>" class="btn btn-primary">Read</a>
                    </div>
                </div>
            </div>
            <% }); %>
        </div>

        <h2>Chapter List</h2>
        <ul class="list-group mt-4">
            <% var thisEP = data.mangaName.name %>
            <% data.chaps.forEach(function(chap) { %>
            <li class="list-group-item">
                <a href="<%=thisEP%>/<%= chap.chapEP %>">
                    <%= chap.chapTitle %>
                </a>

            </li>
            <% }); %>
        </ul>
    </div>
</body>
<%- include('../partials/footer') %>